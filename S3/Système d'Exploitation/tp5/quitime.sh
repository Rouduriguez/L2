#!/bin/bash
if [ $# -eq 0 ]
then
	echo "Veuillez entrer un utilisateur"
	exit 1
fi
while [ $# -gt 0 ]
do
	H=0
	M=0
	cat last.output | grep "^$1" | sed -En "s/.*\(([0-9][0-9]):([0-9][0-9])\)/\1 \2/p" > temp
	while IFS= read -r line # IFS= prevents leading/trailing whitespace from being trimmed; -r prevents backslash escapes from being interpreted
	do
		h=`echo $line | cut -d " " -f1` 
		m=`echo $line | cut -d " " -f2`
		H=`expr $H + $h`
		M=`expr $M + $m`
	done < temp
	H=`expr $H + $((M/60))`
	M=`expr $M % 60`
	echo "$1 s'est connectÃ© $H h et $M min"
	shift
done
rm temp
