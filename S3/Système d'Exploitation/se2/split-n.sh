#!/bin/bash
[ $# -lt 2 ] && exit 1 ## $1 : nom du fichier, $2: nombre de fichiers
cp $1 temp
x=`wc -l < $1` # nombre total de lignes
n=$2 # nombre de fichiers
if [ $(($x%$n)) -eq 0 ] 
then 
	x=`expr $x / $n`
	echo "la part de ligne est exactement $x"
else  
	x=`expr $x / $n`
	echo "la part de ligne est environ $x"
fi 

# for (( i = 1; i <= $n; i++ ))
for i in $(seq 1 `expr $n - 1`)
do
	file="`basename $1`.sp"$i
	if [ $i -eq 1 ] ## header sp1 only
	then 
		echo "$n $1" > $file
	fi
	cpt=`wc -l < temp`
	head -n $x temp >> $file
	tail -n $(($cpt-$x)) $1 > temp
done
file="`basename $1`.sp"$n
cat temp > $file
rm temp 
